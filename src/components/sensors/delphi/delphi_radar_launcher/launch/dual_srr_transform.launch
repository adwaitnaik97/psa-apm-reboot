<?xml version="1.0"?>
<launch>
  <arg name="veh_frame_id" default="robosense"/> 


  <arg name="use_kvaser" default="true" />
  <arg name="use_socketcan" default="false" />
  <arg name="kvaser_hardware_id" default="$(optenv AIOS_DELPHI_SRR_KVASER_HW_ID AIOS_DELPHI_SRR_KVASER_HW_ID)" />
  <arg name="kvaser_circuit_id" default="0" />
  <arg name="socketcan_device" default="can0" />

  <arg name="left_srr_frame_id" default="left_srr"/>
  <arg name="left_srr_upside_down" default="false"/>
  <arg name="left_srr_filter_on_valid" default="true" />

  <arg name="right_srr_frame_id" default="right_srr"/>
  <arg name="right_srr_upside_down" default="false"/>
  <arg name="right_srr_filter_on_valid" default="true" />


<group ns="rear_srr">
  <include file="$(find kvaser_interface)/launch/kvaser_can_bridge.launch" if="$(arg use_kvaser)">
    <arg name="can_hardware_id" value="$(arg kvaser_hardware_id)" />
    <arg name="can_circuit_id" value="$(arg kvaser_circuit_id)" />
    <arg name="can_bit_rate" value="500000" />
  </include>
  <node pkg="socketcan_bridge" type="socketcan_bridge_node" name="socketcan_bridge" if="$(arg use_socketcan)">
    <param name="can_device" value="$(arg socketcan_device)" />
  </node>


  <group ns="$(arg left_srr_frame_id)">
    <remap from="can_rx" to="/rear_srr/can_rx" />
    <remap from="can_tx" to="/rear_srr/can_tx" />
    <include file="$(find delphi_srr)/launch/delphi_srr.launch">
      <arg name="srr_frame_id" value="$(arg left_srr_frame_id)"/>
      <arg name="srr_side" value="Left"/>
      <arg name="srr_upside_down" value="$(arg left_srr_upside_down)"/>
      <arg name="filter_on_valid" value="$(arg left_srr_filter_on_valid)"/>
    </include>
  </group>

  <group ns="$(arg right_srr_frame_id)">
    <remap from="can_rx" to="/rear_srr/can_rx" />
    <remap from="can_tx" to="/rear_srr/can_tx" />
    <include file="$(find delphi_srr)/launch/delphi_srr.launch">
      <arg name="srr_frame_id" value="$(arg right_srr_frame_id)"/>
      <arg name="srr_side" value="Right"/>
      <arg name="srr_upside_down" value="$(arg right_srr_upside_down)"/>
      <arg name="filter_on_valid" value="$(arg right_srr_filter_on_valid)"/>
    </include>
  </group>
</group>
</launch>

